<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Certificate</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../global.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet" />
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    
</head>
<body>
    <header>
        <nav class="bg-white shadow-md shadow-gray-300 h-20">
            <div class="max-w-screen-xl flex items-center justify-between mx-auto px-4 h-full">
                <!-- Logo and Title -->
                <a href="#" class="flex items-center">
                    <img src="../assets/logo1.png" width="70px" class="mt-2" alt="Logo" />
                    <span
                        class=" animate__animated animate__flipInY self-center lg:text-3xl text-2xl font-bold whitespace-nowrap text-[#FF533A]">
                        Quiz<span class="text-[#00A97F]">Spark</span>
                    </span>
                </a>
                <!-- Enroll Button -->
                <button onclick="backDashboard()" type="button"
                    class="text-white bg-[#00A97F] hover:bg-[#FF533A] focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-4 py-2 shadow-lg transition duration-300">
                    Back Dashboard
                </button>
            </div>
        </nav>
    </header>

<main class=" items-center justify-center min-h-screen flex">

    <div class="certificate-border shadow-lg animate__animated animate__fadeIn">
        
        <div class="certificate-seal">
            <span>â˜…</span>
        </div>
        <div class="certificate-content">
            <h1 class="certificate-title">Certificate of Completion</h1>
            <p class="certificate-subtitle">This is to certify that</p>
            <p class="certificate-details font-semibold" id="user-name">[User Name]</p>
            <p class="certificate-subtitle">has successfully completed the</p>
            <p class="certificate-details font-semibold" id="quiz-title">[Quiz Title]</p>
            <p class="certificate-details">with a score of <span id="user-score">[Score]</span> out of <span id="total-score">[Total Score]</span></p>
            <p class="certificate-details">on <span id="completion-date">[Date]</span></p>
            <div class="mt-6">
                <button class="certificate-button" onclick="backDashboard()">Back to Dashboard</button>
                <button class="certificate-button ml-4" onclick="restartQuiz()">Retake Quiz</button>
            </div>
        </div>
    </div>
</main>

    <script>
        // JavaScript to dynamically insert user data
        const currentUser = JSON.parse(localStorage.getItem("currentLoggedinUser"));

        if (currentUser) {
            // Update user name
            document.getElementById("user-name").textContent = currentUser.name || "John Doe";

            const latestQuiz = currentUser.quizData ? currentUser.quizData[currentUser.quizData.length - 1] : null;

            if (latestQuiz) {
                // Update quiz details
                document.getElementById("quiz-title").textContent = latestQuiz.quizName || "Sample Quiz";
                document.getElementById("user-score").textContent = latestQuiz.score || "0";
                document.getElementById("total-score").textContent = latestQuiz.totalQuestions * 10 || "100";
                document.getElementById("completion-date").textContent = latestQuiz.date || new Date().toLocaleDateString();
            } else {
                // Fallback for missing quiz data
                document.getElementById("quiz-title").textContent = "Sample Quiz";
                document.getElementById("user-score").textContent = "0";
                document.getElementById("total-score").textContent = "100";
                document.getElementById("completion-date").textContent = new Date().toLocaleDateString();
            }
        } else {
            // Redirect to login if no user is found
            swal("Unauthorized!", "You need to log in to view your certificate.", "warning").then(() => {
                window.location.href = "../login/index.html";
            });
        }


        // Button functionalities
        function backDashboard() {
            window.location.href = "../quize-dashboard/index.html";
        }

        function restartQuiz() {
            window.location.href = "../start-quize/index.html";
        }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="app.js"></script>
</body>
</html>
